# Product API with MongoDB, Mongoose, and Deep Linking

## Overview
This project provides an API for managing and retrieving products with support for:
- Flexible and extensible **product data model**
- **Multiple categories**
- **Dynamic attributes** without schema changes
- **Pagination** and **sorting**
- **Deep linking** via URL query parameters
- **Category details population** instead of just IDs

Built with:
- **Node.js**
- **Express**
- **MongoDB Atlas** (via Mongoose)
- **REST API architecture**

---

## 1. Product Data Model

### Schema Fields
- **_id**: Unique identifier (`ObjectId`)
- **productKey**: Unique self generated key
- **name**: `String` – Product name
- **description**: `String` – Product description
- **price**: `Number` – Price of the product
- **imageURL**: `String` – URL for product image
- **category**: `ObjectId` – References to `Category` documents
- **brand**: `String` – Brand name
- **inStock**: `Boolean` – Stocks status
- **attributes**: `Map<String, String>` – Dynamic key-value pairs for product-specific details
- **createdAt**: Timestamps (auto-generated by Mongoose)

### Example Product Document
```json
{
    "_id": "68988d148016beddb07d990d",
"name": "iPhone 15 Pro",
"price": 1200,
"description": "Latest Apple flagship smartphone",
"imageURL": "https://www.imagineonline.store/cdn/shop/files/iPhone_15_Pro_Max_Blue_Titanium_PDP_Image_Position-1__en-IN.jpg?v=1694758834&width=1445",
"category": {
    "_id": "6898897353a12070626d18c1",
"name": "Electronics",
"description": "Devices, gadgets, and accessories"
},
"brand": "Apple",
"inStock": true,
"attributes": {
    "Screen Size": "6.1 inch",
"Storage": "256GB",
"Color": "Space Black"
},
"createdAt": "2025-08-10T12:14:12.511Z",
"productKey": "PROD-78136038",
"__v": 0
}
```
## 2. Category Data Model

### Schema Fields
- **_id**: Unique identifier (`ObjectId`)
- **name**: `String` – Product name
- **description**: `String` – Product description

### Example Product Document
```json
{
        "_id": "6898897353a12070626d18c1",
        "name": "Electronics",
        "description": "Devices, gadgets, and accessories",
        "createdAt": "2025-08-10T11:58:43.913Z",
        "__v": 0
}
```
## 3. API Endpoints

### 1. Get Products with Filters, Sorting, and Pagination
**Endpoint:**  
GET /products

**Query Parameters:**  
- `page` *(optional)* – Page number (default: `1`)  
- `limit` *(optional)* – Number of products per page (default: `10`)  

**Example Request:**  
GET /products?page=1&limit=5
**Example Response:**  
```json
{
    "totalProducts": 12,
    "totalPages": 3,
    "currentPage": 1,
    "products": [
        {
            "_id": "68988d148016beddb07d990d",
            "name": "iPhone 15 Pro",
            "price": 1200,
            "description": "Latest Apple flagship smartphone",
            "imageURL": "https://www.imagineonline.store/cdn/shop/files/iPhone_15_Pro_Max_Blue_Titanium_PDP_Image_Position-1__en-IN.jpg?v=1694758834&width=1445",
            "category": "6898897353a12070626d18c1",
            "brand": "Apple",
            "inStock": true,
            "attributes": {
                "Screen Size": "6.1 inch",
                "Storage": "256GB",
                "Color": "Space Black"
            },
            "createdAt": "2025-08-10T12:14:12.511Z",
            "productKey": "PROD-78136038",
            "__v": 0
        },
        {
            "_id": "68988d148016beddb07d990e",
            "name": "Sony WH-1000XM5",
            "price": 350,
            "description": "Noise cancelling wireless headphones",
            "imageURL": "https://www.sony.co.in/image/6145c1d32e6ac8e63a46c912dc33c5bb?fmt=pjpeg&wid=330&bgcolor=FFFFFF&bgc=FFFFFF",
            "category": "6898897353a12070626d18c1",
            "brand": "Sony",
            "inStock": true,
            "attributes": {
                "Battery Life": "30 hours",
                "Connectivity": "Bluetooth 5.2",
                "Color": "Black"
            },
            "createdAt": "2025-08-10T12:14:12.512Z",
            "productKey": "PROD-CFBA52B5",
            "__v": 0
        },
        {
            "_id": "68988d148016beddb07d990f",
            "name": "Men's Cotton T-Shirt",
            "price": 20,
            "description": "Soft round neck cotton T-shirt",
            "imageURL": "https://thehouseofrare.com/cdn/shop/files/gis-mens-solid-t-shirt-black27624_91fbdead-2d6e-4b23-a5b6-596ddf9ce756.jpg?v=1747223789",
            "category": "6898898053a12070626d18c3",
            "brand": "Specscart",
            "inStock": true,
            "attributes": {
                "Material": "100% Cotton",
                "Size": "L",
                "Color": "Blue"
            },
            "createdAt": "2025-08-10T12:14:12.512Z",
            "productKey": "PROD-0785EB51",
            "__v": 0
        },
        {
            "_id": "68988d148016beddb07d9910",
            "name": "Women's Denim Jacket",
            "price": 60,
            "description": "Classic blue denim jacket",
            "imageURL": "https://freakins.com/cdn/shop/files/MadhuraJUry8318.jpg?v=1750057327",
            "category": "6898898053a12070626d18c3",
            "brand": "Levi's",
            "inStock": true,
            "attributes": {
                "Material": "Denim",
                "Size": "M",
                "Color": "Blue"
            },
            "createdAt": "2025-08-10T12:14:12.512Z",
            "productKey": "PROD-97CE7071",
            "__v": 0
        },
        {
            "_id": "6898b2e2126b9e3766d679cd",
            "name": "Wireless Bluetooth Headphones",
            "price": 2999,
            "description": "Over-ear noise-cancelling Bluetooth headphones with 30 hours battery life.",
            "imageURL": "https://www.boat-lifestyle.com/cdn/shop/products/main2_b66dce6b-710d-49cb-9d1c-2bc8c9c0ab15.png?v=1645698328",
            "category": "6898897353a12070626d18c1",
            "brand": "SoundMax",
            "inStock": true,
            "attributes": {},
            "createdAt": "2025-08-10T14:55:30.045Z",
            "productKey": "PROD-980BFD97",
            "__v": 0
        }
    ]
}
```
## 4.URL Management (Deep Linking)
### 1. The API supports deep linking by reflecting the current search, filters, sorting, and pagination parameters directly in the URL query string.

***Example URL***
GET /products/products?search=apple&category=6898897353a12070626d18c1&brand=Apple&price_min=500&price_max=2000&sort=price_asc&page=1&limit=10

**Query Parameters:**  
- `search` *(optional)* – Search term for product name or description  
- `category` *(optional)* – Comma-separated category IDs or slugs (e.g., `electronics,apparel`)  
- `brand` *(optional)* – Brand name to filter  
- `price_min` *(optional)* – Minimum price  
- `price_max` *(optional)* – Maximum price  
- `sort` *(optional)* – Sorting field and order, format: `field_order` (e.g., `price_asc`, `price_desc`, `createdAt_desc`)  
- `page` *(optional)* – Page number (default: `1`)  
- `limit` *(optional)* – Number of products per page (default: `10`)  

**Example Response:**  
```json
{
    "totalProducts": 1,
    "totalPages": 1,
    "currentPage": 1,
    "products": [
        {
            "_id": "68988d148016beddb07d990d",
            "name": "iPhone 15 Pro",
            "price": 1200,
            "description": "Latest Apple flagship smartphone",
            "imageURL": "https://www.imagineonline.store/cdn/shop/files/iPhone_15_Pro_Max_Blue_Titanium_PDP_Image_Position-1__en-IN.jpg?v=1694758834&width=1445",
            "category": {
                "_id": "6898897353a12070626d18c1",
                "name": "Electronics",
                "description": "Devices, gadgets, and accessories"
            },
            "brand": "Apple",
            "inStock": true,
            "attributes": {
                "Screen Size": "6.1 inch",
                "Storage": "256GB",
                "Color": "Space Black"
            },
            "createdAt": "2025-08-10T12:14:12.511Z",
            "productKey": "PROD-78136038",
            "__v": 0
        }
    ]
}
```
## 5.Pagination

Pagination is implemented to handle large datasets efficiently and provide a smooth user experience.

### Query Parameters:
- **`page`** *(optional)* – Specifies which page of results to fetch.  
  Default: `1`
- **`limit`** *(optional)* – Specifies how many products to return per page.  
  Default: `10`

### Response Fields:
- **`totalProducts`** – Total number of products matching the filters/search criteria.
- **`totalPages`** – Total number of pages based on the `limit`.
- **`currentPage`** – Current page number in the result set.
- **`products`** – Array of product objects for the current page.

### Example Request:
GET /products?page=1&limit=5

### Example Response:
```json
{
    "totalProducts": 12,
    "totalPages": 3,
    "currentPage": 1,
    "products": [
        {
            "_id": "68988d148016beddb07d990d",
            "name": "iPhone 15 Pro",
            "price": 1200,
            "description": "Latest Apple flagship smartphone",
            "imageURL": "https://www.imagineonline.store/cdn/shop/files/iPhone_15_Pro_Max_Blue_Titanium_PDP_Image_Position-1__en-IN.jpg?v=1694758834&width=1445",
            "category": "6898897353a12070626d18c1",
            "brand": "Apple",
            "inStock": true,
            "attributes": {
                "Screen Size": "6.1 inch",
                "Storage": "256GB",
                "Color": "Space Black"
            },
            "createdAt": "2025-08-10T12:14:12.511Z",
            "productKey": "PROD-78136038",
            "__v": 0
        },
        {
            "_id": "68988d148016beddb07d990e",
            "name": "Sony WH-1000XM5",
            "price": 350,
            "description": "Noise cancelling wireless headphones",
            "imageURL": "https://www.sony.co.in/image/6145c1d32e6ac8e63a46c912dc33c5bb?fmt=pjpeg&wid=330&bgcolor=FFFFFF&bgc=FFFFFF",
            "category": "6898897353a12070626d18c1",
            "brand": "Sony",
            "inStock": true,
            "attributes": {
                "Battery Life": "30 hours",
                "Connectivity": "Bluetooth 5.2",
                "Color": "Black"
            },
            "createdAt": "2025-08-10T12:14:12.512Z",
            "productKey": "PROD-CFBA52B5",
            "__v": 0
        },
        {
            "_id": "68988d148016beddb07d990f",
            "name": "Men's Cotton T-Shirt",
            "price": 20,
            "description": "Soft round neck cotton T-shirt",
            "imageURL": "https://thehouseofrare.com/cdn/shop/files/gis-mens-solid-t-shirt-black27624_91fbdead-2d6e-4b23-a5b6-596ddf9ce756.jpg?v=1747223789",
            "category": "6898898053a12070626d18c3",
            "brand": "Specscart",
            "inStock": true,
            "attributes": {
                "Material": "100% Cotton",
                "Size": "L",
                "Color": "Blue"
            },
            "createdAt": "2025-08-10T12:14:12.512Z",
            "productKey": "PROD-0785EB51",
            "__v": 0
        },
        {
            "_id": "68988d148016beddb07d9910",
            "name": "Women's Denim Jacket",
            "price": 60,
            "description": "Classic blue denim jacket",
            "imageURL": "https://freakins.com/cdn/shop/files/MadhuraJUry8318.jpg?v=1750057327",
            "category": "6898898053a12070626d18c3",
            "brand": "Levi's",
            "inStock": true,
            "attributes": {
                "Material": "Denim",
                "Size": "M",
                "Color": "Blue"
            },
            "createdAt": "2025-08-10T12:14:12.512Z",
            "productKey": "PROD-97CE7071",
            "__v": 0
        },
        {
            "_id": "6898b2e2126b9e3766d679cd",
            "name": "Wireless Bluetooth Headphones",
            "price": 2999,
            "description": "Over-ear noise-cancelling Bluetooth headphones with 30 hours battery life.",
            "imageURL": "https://www.boat-lifestyle.com/cdn/shop/products/main2_b66dce6b-710d-49cb-9d1c-2bc8c9c0ab15.png?v=1645698328",
            "category": "6898897353a12070626d18c1",
            "brand": "SoundMax",
            "inStock": true,
            "attributes": {},
            "createdAt": "2025-08-10T14:55:30.045Z",
            "productKey": "PROD-980BFD97",
            "__v": 0
        }
    ]
}
```
## 6.Category

Categories are used to group products into logical segments.  
Each product can belong to one or more categories.

### Schema Fields
- **_id**: Unique identifier (`ObjectId`)
- **name**: `String` – Category name (e.g., "Electronics", "Apparel")
- **description**: `String` – Brief description of the category
- **createdAt**: Timestamp (auto-generated by Mongoose)

### Example Category Document
```json
{
  "_id": "64f8b7b1a8d2f1a7c8b9e4e9",
  "name": "Electronics",
  "description": "Electronic devices and accessories",
  "createdAt": "2025-08-10T12:34:56.789Z",
}
```